// script.js - Fonctions dynamiques du site

// Liste simulée des logements avec traductions
const logements = [
  {
    ville: "Split",
    titre: {
      fr: "Appartement moderne à Split",
      en: "Modern Apartment in Split",
      pl: "Nowoczesny apartament w Splicie",
      hr: "Moderan apartman u Splitu"
    },
    description: {
      fr: "À 200m de la plage, 2 chambres, Wi-Fi gratuit",
      en: "200m from beach, 2 bedrooms, free Wi-Fi",
      pl: "200m od plaży, 2 sypialnie, darmowe Wi-Fi",
      hr: "200m od plaže, 2 sobe, besplatan Wi-Fi"
    },
    prix: "90€/nuit",
    image: "https://source.unsplash.com/400x300/?apartment,split"
  },
  {
    ville: "Dubrovnik",
    titre: {
      fr: "Villa en bord de mer à Dubrovnik",
      en: "Seaside Villa in Dubrovnik",
      pl: "Willa nad morzem w Dubrowniku",
      hr: "Vila uz more u Dubrovniku"
    },
    description: {
      fr: "Vue mer, 3 chambres, piscine privée",
      en: "Sea view, 3 bedrooms, private pool",
      pl: "Widok na morze, 3 sypialnie, prywatny basen",
      hr: "Pogled na more, 3 sobe, privatni bazen"
    },
    prix: "150€/nuit",
    image: "https://source.unsplash.com/400x300/?villa,dubrovnik"
  }
];

// Traductions des éléments statiques
const translations = {
  fr: {
    title: "Location Plage Croatie",
    hero_title: "Trouvez votre logement en bord de mer en Croatie",
    reservation_title: "Réserver un logement",
    submit_btn: "Envoyer"
  },
  en: {
    title: "Croatia Beach Rentals",
    hero_title: "Find your beachside stay in Croatia",
    reservation_title: "Book a Rental",
    submit_btn: "Send"
  },
  pl: {
    title: "Wynajem nad morzem w Chorwacji",
    hero_title: "Znajdź zakwaterowanie nad morzem w Chorwacji",
    reservation_title: "Zarezerwuj zakwaterowanie",
    submit_btn: "Wyślij"
  },
  hr: {
    title: "Najam uz obalu u Hrvatskoj",
    hero_title: "Pronađite smještaj uz more u Hrvatskoj",
    reservation_title: "Rezerviraj smještaj",
    submit_btn: "Pošalji"
  }
};

const langSwitcher = document.getElementById("language-switcher");
const searchInput = document.getElementById("search");
const listing = document.getElementById("listing");

// Applique les traductions aux éléments avec l'attribut data-i18n
function applyTranslations(lang) {
  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    if (translations[lang] && translations[lang][key]) {
      el.textContent = translations[lang][key];
    }
  });
}

// Affiche la liste des logements selon la langue et le filtre de recherche
function renderLogements(lang, search = "") {
  listing.innerHTML = "";
  logements.filter(log =>
    log.ville.toLowerCase().includes(search.toLowerCase())
  ).forEach(log => {
    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <img src="${log.image}" alt="${log.titre[lang]}">
      <div class="card-body">
        <h3>${log.titre[lang]}</h3>
        <p>${log.description[lang]}</p>
        <p><strong>${log.prix}</strong></p>
      </div>
    `;
    listing.appendChild(card);
  });
}

// Initialisation : récupérer la langue choisie ou mettre français par défaut
let selectedLang = localStorage.getItem("lang") || "fr";
langSwitcher.value = selectedLang;
applyTranslations(selectedLang);
renderLogeme
